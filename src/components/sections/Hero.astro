---
// Hero.astro - Final Version with improved scroll handling
// All styles are in src/styles/globals.css
---

<section id="home" class="hero-section">
  <div class="hero-background-effects">
    <div class="hero-gradient-top-right"></div>
    <div class="hero-gradient-bottom-left"></div>
  </div>

  <div class="container hero-content">
    <div class="hero-text-container">
      <div class="hero-tagline animate-fade-in">
        <span class="tagline-badge">Graphic Designer</span>
      </div>

      <h1 class="hero-title animate-slide-up">
        Creative
        <span class="hero-title-accent">Design Solutions</span>
      </h1>

      <p class="hero-description animate-slide-up-delay">
        Bringing brands to life through thoughtful design, from logos to social media campaigns
      </p>

      <div class="hero-buttons animate-fade-in-delay">
        <button
          id="view-work-button"
          class="btn-primary"
        >
          View Our Work
        </button>
        <a
          href="#contact"
          class="btn-secondary"
        >
          Get In Touch
        </a>
      </div>
    </div>
  </div>

  <button
    id="scroll-down-button"
    class="scroll-down-button animate-bounce"
    aria-label="Scroll down"
  >
    <i class="fa-solid fa-arrow-down"></i>
  </button>
</section>

<script>
  // Ensure the script runs after the entire page (including all sections) is loaded.
  // This is crucial for scroll-to-section links to find their targets.
  document.addEventListener('astro:after-swap', setupHeroScroll); // For Astro's view transitions
  document.addEventListener('DOMContentLoaded', setupHeroScroll); // For initial page load

  function setupHeroScroll() {
    console.log('Hero scroll script loaded and attempting to attach.');

    const viewWorkButton = document.getElementById('view-work-button');
    const scrollDownButton = document.getElementById('scroll-down-button');
    const portfolioSection = document.getElementById('portfolio'); // Get reference to the portfolio section

    const scrollToPortfolio = (event: Event) => {
      event.preventDefault();
      if (portfolioSection) {
        portfolioSection.scrollIntoView({ behavior: 'smooth' });
        console.log('Scrolled to portfolio section.');
      } else {
        console.warn('Portfolio section with ID "portfolio" not found for scrolling (Hero).');
      }
    };

    // Remove existing listeners to prevent duplicates if function runs multiple times
    if (viewWorkButton) viewWorkButton.removeEventListener('click', scrollToPortfolio);
    if (scrollDownButton) scrollDownButton.removeEventListener('click', scrollToPortfolio);

    // Add new listeners
    if (viewWorkButton) viewWorkButton.addEventListener('click', scrollToPortfolio);
    if (scrollDownButton) scrollDownButton.addEventListener('click', scrollToPortfolio);
  }

  // Initial call in case DOMContentLoaded already fired before script was evaluated
  if (document.readyState === 'complete' || document.readyState === 'interactive') {
      setupHeroScroll();
  }
</script>